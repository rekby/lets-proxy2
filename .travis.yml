language: go

env:
  global:
    - GO111MODULE=on
    - VERSION=$TRAVIS_TAG commit $TRAVIS_COMMIT

matrix:
  include:
  - go: "stable"
    env:
      - GOFLAGS=-mod=vendor
  - go: "stable"
    env:
      - GOFLAGS=
  - go: "master"
    env:
      - GOFLAGS=-mod=vendor

services:
  - docker

script:
  - bash tests/prepare.sh
  - go test -v ./...